"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-stickynode";
exports.ids = ["vendor-chunks/react-stickynode"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-stickynode/dist/es/Sticky.js":
/*!*********************************************************!*\
  !*** ./node_modules/react-stickynode/dist/es/Sticky.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"(ssr)/../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n/* harmony import */ var core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_set_prototype_of_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"(ssr)/../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n/* harmony import */ var core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_prototype_of_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"(ssr)/../../node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"(ssr)/../../node_modules/core-js/modules/es.reflect.construct.js\");\n/* harmony import */ var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_object_define_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"(ssr)/../../node_modules/core-js/modules/es.object.define-property.js\");\n/* harmony import */ var core_js_modules_es_object_define_property_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_define_property_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.symbol.js */ \"(ssr)/../../node_modules/core-js/modules/es.symbol.js\");\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"(ssr)/../../node_modules/core-js/modules/es.symbol.description.js\");\n/* harmony import */ var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"(ssr)/../../node_modules/core-js/modules/es.symbol.iterator.js\");\n/* harmony import */ var core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_iterator_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"(ssr)/../../node_modules/core-js/modules/es.array.iterator.js\");\n/* harmony import */ var core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_iterator_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"(ssr)/../../node_modules/core-js/modules/es.string.iterator.js\");\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"(ssr)/../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! prop-types */ \"(ssr)/../../node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! subscribe-ui-event */ \"(ssr)/../../node_modules/subscribe-ui-event/index.es.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! classnames */ \"(ssr)/../../node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! shallowequal */ \"(ssr)/../../node_modules/shallowequal/index.js\");\n/* harmony import */ var shallowequal__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(shallowequal__WEBPACK_IMPORTED_MODULE_14__);\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n // constants\n\nvar STATUS_ORIGINAL = 0; // The default status, locating at the original position.\n\nvar STATUS_RELEASED = 1; // The released status, locating at somewhere on document but not default one.\n\nvar STATUS_FIXED = 2; // The sticky status, locating fixed to the top or the bottom of screen.\n\nvar TRANSFORM_PROP = 'transform'; // global variable for all instances\n\nvar doc;\nvar docBody;\nvar docEl;\nvar canEnableTransforms = true; // Use transform by default, so no Sticky on lower-end browser when no Modernizr\n\nvar M;\nvar scrollDelta = 0;\nvar win;\nvar winHeight = -1;\n\nvar Sticky = /*#__PURE__*/function (_Component) {\n  _inherits(Sticky, _Component);\n\n  var _super = _createSuper(Sticky);\n\n  function Sticky(props, context) {\n    var _this;\n\n    _classCallCheck(this, Sticky);\n\n    _this = _super.call(this, props, context);\n    _this.handleResize = _this.handleResize.bind(_assertThisInitialized(_this));\n    _this.handleScroll = _this.handleScroll.bind(_assertThisInitialized(_this));\n    _this.handleScrollStart = _this.handleScrollStart.bind(_assertThisInitialized(_this));\n    _this.delta = 0;\n    _this.stickyTop = 0;\n    _this.stickyBottom = 0;\n    _this.frozen = false;\n    _this.skipNextScrollEvent = false;\n    _this.scrollTop = -1;\n    _this.bottomBoundaryTarget;\n    _this.topTarget;\n    _this.subscribers;\n    _this.state = {\n      top: 0,\n      // A top offset from viewport top where Sticky sticks to when scrolling up\n      bottom: 0,\n      // A bottom offset from viewport top where Sticky sticks to when scrolling down\n      width: 0,\n      // Sticky width\n      height: 0,\n      // Sticky height\n      x: 0,\n      // The original x of Sticky\n      y: 0,\n      // The original y of Sticky\n      topBoundary: 0,\n      // The top boundary on document\n      bottomBoundary: Infinity,\n      // The bottom boundary on document\n      status: STATUS_ORIGINAL,\n      // The Sticky status\n      pos: 0,\n      // Real y-axis offset for rendering position-fixed and position-relative\n      activated: false // once browser info is available after mounted, it becomes true to avoid checksum error\n\n    };\n    return _this;\n  }\n\n  _createClass(Sticky, [{\n    key: \"getTargetHeight\",\n    value: function getTargetHeight(target) {\n      return target && target.offsetHeight || 0;\n    }\n  }, {\n    key: \"getTopPosition\",\n    value: function getTopPosition(top) {\n      // a top argument can be provided to override reading from the props\n      top = top || this.props.top || 0;\n\n      if (typeof top === 'string') {\n        if (!this.topTarget) {\n          this.topTarget = doc.querySelector(top);\n        }\n\n        top = this.getTargetHeight(this.topTarget);\n      }\n\n      return top;\n    }\n  }, {\n    key: \"getTargetBottom\",\n    value: function getTargetBottom(target) {\n      if (!target) {\n        return -1;\n      }\n\n      var rect = target.getBoundingClientRect();\n      return this.scrollTop + rect.bottom;\n    }\n  }, {\n    key: \"getBottomBoundary\",\n    value: function getBottomBoundary(bottomBoundary) {\n      // a bottomBoundary can be provided to avoid reading from the props\n      var boundary = bottomBoundary || this.props.bottomBoundary; // TODO, bottomBoundary was an object, depricate it later.\n\n      if (_typeof(boundary) === 'object') {\n        boundary = boundary.value || boundary.target || 0;\n      }\n\n      if (typeof boundary === 'string') {\n        if (!this.bottomBoundaryTarget) {\n          this.bottomBoundaryTarget = doc.querySelector(boundary);\n        }\n\n        boundary = this.getTargetBottom(this.bottomBoundaryTarget);\n      }\n\n      return boundary && boundary > 0 ? boundary : Infinity;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        status: STATUS_ORIGINAL,\n        pos: 0\n      });\n    }\n  }, {\n    key: \"release\",\n    value: function release(pos) {\n      this.setState({\n        status: STATUS_RELEASED,\n        pos: pos - this.state.y\n      });\n    }\n  }, {\n    key: \"fix\",\n    value: function fix(pos) {\n      this.setState({\n        status: STATUS_FIXED,\n        pos: pos\n      });\n    }\n    /**\n     * Update the initial position, width, and height. It should update whenever children change.\n     * @param {Object} options optional top and bottomBoundary new values\n     */\n\n  }, {\n    key: \"updateInitialDimension\",\n    value: function updateInitialDimension(options) {\n      options = options || {};\n\n      if (!this.outerElement || !this.innerElement) {\n        return;\n      }\n\n      var outerRect = this.outerElement.getBoundingClientRect();\n      var innerRect = this.innerElement.getBoundingClientRect();\n      var width = outerRect.width || outerRect.right - outerRect.left;\n      var height = innerRect.height || innerRect.bottom - innerRect.top;\n      var outerY = outerRect.top + this.scrollTop;\n      this.setState({\n        top: this.getTopPosition(options.top),\n        bottom: Math.min(this.state.top + height, winHeight),\n        width: width,\n        height: height,\n        x: outerRect.left,\n        y: outerY,\n        bottomBoundary: this.getBottomBoundary(options.bottomBoundary),\n        topBoundary: outerY\n      });\n    }\n  }, {\n    key: \"handleResize\",\n    value: function handleResize(e, ae) {\n      if (this.props.shouldFreeze()) {\n        return;\n      }\n\n      winHeight = ae.resize.height;\n      this.updateInitialDimension();\n      this.update();\n    }\n  }, {\n    key: \"handleScrollStart\",\n    value: function handleScrollStart(e, ae) {\n      this.frozen = this.props.shouldFreeze();\n\n      if (this.frozen) {\n        return;\n      }\n\n      if (this.scrollTop === ae.scroll.top) {\n        // Scroll position hasn't changed,\n        // do nothing\n        this.skipNextScrollEvent = true;\n      } else {\n        this.scrollTop = ae.scroll.top;\n        this.updateInitialDimension();\n      }\n    }\n  }, {\n    key: \"handleScroll\",\n    value: function handleScroll(e, ae) {\n      // Scroll doesn't need to be handled\n      if (this.skipNextScrollEvent) {\n        this.skipNextScrollEvent = false;\n        return;\n      }\n\n      scrollDelta = ae.scroll.delta;\n      this.scrollTop = ae.scroll.top;\n      this.update();\n    }\n    /**\n     * Update Sticky position.\n     */\n\n  }, {\n    key: \"update\",\n    value: function update() {\n      var disabled = !this.props.enabled || this.state.bottomBoundary - this.state.topBoundary <= this.state.height || this.state.width === 0 && this.state.height === 0;\n\n      if (disabled) {\n        if (this.state.status !== STATUS_ORIGINAL) {\n          this.reset();\n        }\n\n        return;\n      }\n\n      var delta = scrollDelta; // \"top\" and \"bottom\" are the positions that this.state.top and this.state.bottom project\n      // on document from viewport.\n\n      var top = this.scrollTop + this.state.top;\n      var bottom = this.scrollTop + this.state.bottom; // There are 2 principles to make sure Sticky won't get wrong so much:\n      // 1. Reset Sticky to the original postion when \"top\" <= topBoundary\n      // 2. Release Sticky to the bottom boundary when \"bottom\" >= bottomBoundary\n\n      if (top <= this.state.topBoundary) {\n        // #1\n        this.reset();\n      } else if (bottom >= this.state.bottomBoundary) {\n        // #2\n        this.stickyBottom = this.state.bottomBoundary;\n        this.stickyTop = this.stickyBottom - this.state.height;\n        this.release(this.stickyTop);\n      } else {\n        if (this.state.height > winHeight - this.state.top) {\n          // In this case, Sticky is higher then viewport minus top offset\n          switch (this.state.status) {\n            case STATUS_ORIGINAL:\n              this.release(this.state.y);\n              this.stickyTop = this.state.y;\n              this.stickyBottom = this.stickyTop + this.state.height;\n            // Commentting out \"break\" is on purpose, because there is a chance to transit to FIXED\n            // from ORIGINAL when calling window.scrollTo().\n            // break;\n\n            case STATUS_RELEASED:\n              // If \"top\" and \"bottom\" are inbetween stickyTop and stickyBottom, then Sticky is in\n              // RELEASE status. Otherwise, it changes to FIXED status, and its bottom sticks to\n              // viewport bottom when scrolling down, or its top sticks to viewport top when scrolling up.\n              this.stickyBottom = this.stickyTop + this.state.height;\n\n              if (delta > 0 && bottom > this.stickyBottom) {\n                this.fix(this.state.bottom - this.state.height);\n              } else if (delta < 0 && top < this.stickyTop) {\n                this.fix(this.state.top);\n              }\n\n              break;\n\n            case STATUS_FIXED:\n              var toRelease = true;\n              var pos = this.state.pos;\n              var height = this.state.height; // In regular cases, when Sticky is in FIXED status,\n              // 1. it's top will stick to the screen top,\n              // 2. it's bottom will stick to the screen bottom,\n              // 3. if not the cases above, then it's height gets changed\n\n              if (delta > 0 && pos === this.state.top) {\n                // case 1, and scrolling down\n                this.stickyTop = top - delta;\n                this.stickyBottom = this.stickyTop + height;\n              } else if (delta < 0 && pos === this.state.bottom - height) {\n                // case 2, and scrolling up\n                this.stickyBottom = bottom - delta;\n                this.stickyTop = this.stickyBottom - height;\n              } else if (pos !== this.state.bottom - height && pos !== this.state.top) {\n                // case 3\n                // This case only happens when Sticky's bottom sticks to the screen bottom and\n                // its height gets changed. Sticky should be in RELEASE status and update its\n                // sticky bottom by calculating how much height it changed.\n                var deltaHeight = pos + height - this.state.bottom;\n                this.stickyBottom = bottom - delta + deltaHeight;\n                this.stickyTop = this.stickyBottom - height;\n              } else {\n                toRelease = false;\n              }\n\n              if (toRelease) {\n                this.release(this.stickyTop);\n              }\n\n              break;\n          }\n        } else {\n          // In this case, Sticky is shorter then viewport minus top offset\n          // and will always fix to the top offset of viewport\n          this.fix(this.state.top);\n        }\n      }\n\n      this.delta = delta;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (prevState.status !== this.state.status && this.props.onStateChange) {\n        this.props.onStateChange({\n          status: this.state.status\n        });\n      } // check if we are up-to-date, is triggered in case of scroll restoration\n\n\n      if (this.state.top !== prevState.top) {\n        this.updateInitialDimension();\n        this.update();\n      }\n\n      var arePropsChanged = !shallowequal__WEBPACK_IMPORTED_MODULE_14___default()(this.props, prevProps);\n\n      if (arePropsChanged) {\n        // if the props for enabling are toggled, then trigger the update or reset depending on the current props\n        if (prevProps.enabled !== this.props.enabled) {\n          if (this.props.enabled) {\n            this.setState({\n              activated: true\n            }, function () {\n              _this2.updateInitialDimension();\n\n              _this2.update();\n            });\n          } else {\n            this.setState({\n              activated: false\n            }, function () {\n              _this2.reset();\n            });\n          }\n        } // if the top or bottomBoundary props were changed, then trigger the update\n        else if (prevProps.top !== this.props.top || prevProps.bottomBoundary !== this.props.bottomBoundary) {\n          this.updateInitialDimension();\n          this.update();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var subscribers = this.subscribers || [];\n\n      for (var i = subscribers.length - 1; i >= 0; i--) {\n        this.subscribers[i].unsubscribe();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // Only initialize the globals if this is the first\n      // time this component type has been mounted\n      if (!win) {\n        win = window;\n        doc = document;\n        docEl = doc.documentElement;\n        docBody = doc.body;\n        winHeight = win.innerHeight || docEl.clientHeight;\n        M = window.Modernizr; // No Sticky on lower-end browser when no Modernizr\n\n        if (M && M.prefixed) {\n          canEnableTransforms = M.csstransforms3d;\n          TRANSFORM_PROP = M.prefixed('transform');\n        }\n      } // when mount, the scrollTop is not necessary on the top\n\n\n      this.scrollTop = docBody.scrollTop + docEl.scrollTop;\n\n      if (this.props.enabled) {\n        this.setState({\n          activated: true\n        });\n        this.updateInitialDimension();\n        this.update();\n      } // bind the listeners regardless if initially enabled - allows the component to toggle sticky functionality\n\n\n      this.subscribers = [(0,subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__.subscribe)('scrollStart', this.handleScrollStart.bind(this), {\n        useRAF: true\n      }), (0,subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__.subscribe)('scroll', this.handleScroll.bind(this), {\n        useRAF: true,\n        enableScrollInfo: true\n      }), (0,subscribe_ui_event__WEBPACK_IMPORTED_MODULE_12__.subscribe)('resize', this.handleResize.bind(this), {\n        enableResizeInfo: true\n      })];\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(style, pos) {\n      var enableTransforms = canEnableTransforms && this.props.enableTransforms;\n\n      if (enableTransforms && this.state.activated) {\n        style[TRANSFORM_PROP] = 'translate3d(0,' + Math.round(pos) + 'px,0)';\n      } else {\n        style.top = pos + 'px';\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return !this.props.shouldFreeze() && !(shallowequal__WEBPACK_IMPORTED_MODULE_14___default()(this.props, nextProps) && shallowequal__WEBPACK_IMPORTED_MODULE_14___default()(this.state, nextState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames,\n          _this3 = this;\n\n      // TODO, \"overflow: auto\" prevents collapse, need a good way to get children height\n      var innerStyle = {\n        position: this.state.status === STATUS_FIXED ? 'fixed' : 'relative',\n        top: this.state.status === STATUS_FIXED ? '0px' : '',\n        zIndex: this.props.innerZ\n      };\n      var outerStyle = {}; // always use translate3d to enhance the performance\n\n      this.translate(innerStyle, this.state.pos);\n\n      if (this.state.status !== STATUS_ORIGINAL) {\n        innerStyle.width = this.state.width + 'px';\n        outerStyle.height = this.state.height + 'px';\n      }\n\n      var outerClasses = classnames__WEBPACK_IMPORTED_MODULE_13___default()('sticky-outer-wrapper', this.props.className, (_classNames = {}, _defineProperty(_classNames, this.props.activeClass, this.state.status === STATUS_FIXED), _defineProperty(_classNames, this.props.releasedClass, this.state.status === STATUS_RELEASED), _classNames));\n      var innerClasses = classnames__WEBPACK_IMPORTED_MODULE_13___default()('sticky-inner-wrapper', this.props.innerClass, _defineProperty({}, this.props.innerActiveClass, this.state.status === STATUS_FIXED));\n      var children = this.props.children;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n        ref: function ref(outer) {\n          _this3.outerElement = outer;\n        },\n        className: outerClasses,\n        style: outerStyle\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n        ref: function ref(inner) {\n          _this3.innerElement = inner;\n        },\n        className: innerClasses,\n        style: innerStyle\n      }, typeof children === 'function' ? children({\n        status: this.state.status\n      }) : children));\n    }\n  }]);\n\n  return Sticky;\n}(react__WEBPACK_IMPORTED_MODULE_11__.Component);\n\nSticky.displayName = 'Sticky';\nSticky.defaultProps = {\n  shouldFreeze: function shouldFreeze() {\n    return false;\n  },\n  enabled: true,\n  top: 0,\n  bottomBoundary: 0,\n  enableTransforms: true,\n  activeClass: 'active',\n  releasedClass: 'released',\n  onStateChange: null,\n  innerClass: '',\n  innerActiveClass: ''\n};\n/**\n * @param {Bool} enabled A switch to enable or disable Sticky.\n * @param {String/Number} top A top offset px for Sticky. Could be a selector representing a node\n *        whose height should serve as the top offset.\n * @param {String/Number} bottomBoundary A bottom boundary px on document where Sticky will stop.\n *        Could be a selector representing a node whose bottom should serve as the bottom boudary.\n */\n\nSticky.propTypes = {\n  enabled: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),\n  top: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)]),\n  bottomBoundary: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().object), // TODO, may remove\n  (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)]),\n  enableTransforms: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().bool),\n  activeClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  releasedClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  innerClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  innerActiveClass: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().string),\n  onStateChange: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),\n  shouldFreeze: (prop_types__WEBPACK_IMPORTED_MODULE_15___default().func),\n  innerZ: prop_types__WEBPACK_IMPORTED_MODULE_15___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_15___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_15___default().number)])\n};\nSticky.STATUS_ORIGINAL = STATUS_ORIGINAL;\nSticky.STATUS_RELEASED = STATUS_RELEASED;\nSticky.STATUS_FIXED = STATUS_FIXED;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Sticky);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc3RpY2t5bm9kZS9kaXN0L2VzL1N0aWNreS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRTBDO0FBQ0E7QUFDUDtBQUNDO0FBQ0s7QUFDaEI7QUFDWTtBQUNIO0FBQ0Q7QUFDQztBQUNVOztBQUV6RCw0Q0FBNEMsa0JBQWtCLGtDQUFrQyxvRUFBb0UsS0FBSyxPQUFPLG9CQUFvQjs7QUFFcE0sd0JBQXdCLDJCQUEyQixzR0FBc0cscUJBQXFCLG1CQUFtQiw4SEFBOEg7O0FBRS9ULGtEQUFrRCwwQ0FBMEM7O0FBRTVGLDRDQUE0QyxnQkFBZ0Isa0JBQWtCLE9BQU8sMkJBQTJCLHdEQUF3RCxnQ0FBZ0MsdURBQXVEOztBQUUvUCw4REFBOEQsc0VBQXNFLDhEQUE4RCxrREFBa0QsaUJBQWlCLEdBQUc7O0FBRXhRLDJDQUEyQywrREFBK0QsNkVBQTZFLHlFQUF5RSxlQUFlLHVEQUF1RCxHQUFHLCtDQUErQyxpQkFBaUIsR0FBRzs7QUFFNVksaUNBQWlDLDBHQUEwRyxpQkFBaUIsYUFBYTs7QUFFekssaUNBQWlDLDZEQUE2RCx5Q0FBeUMsOENBQThDLGlDQUFpQyxtREFBbUQsMkRBQTJELE9BQU8seUNBQXlDOztBQUVwWCxrREFBa0QsMEVBQTBFLGVBQWUsNEJBQTRCLG1GQUFtRjs7QUFFMVAsd0NBQXdDLHVCQUF1Qix5RkFBeUY7O0FBRXhKLHVDQUF1Qyx3RUFBd0UsMENBQTBDLDhDQUE4QyxNQUFNLDRFQUE0RSxJQUFJLGVBQWUsWUFBWTs7QUFFeFQsOEJBQThCLHVHQUF1RyxtREFBbUQ7O0FBRS9JO0FBQ047QUFDWTtBQUNYO0FBQ0ksQ0FBQzs7QUFFekMseUJBQXlCOztBQUV6Qix5QkFBeUI7O0FBRXpCLHNCQUFzQjs7QUFFdEIsa0NBQWtDOztBQUVsQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxrRUFBa0U7O0FBRWxFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwrQkFBK0I7QUFDL0I7O0FBRUE7QUFDQSx1REFBdUQ7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFROzs7QUFHUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkIsb0RBQVk7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBLGFBQWE7QUFDYixZQUFZO0FBQ1o7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROzs7QUFHUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7OztBQUdSLDBCQUEwQiw4REFBUztBQUNuQztBQUNBLE9BQU8sR0FBRyw4REFBUztBQUNuQjtBQUNBO0FBQ0EsT0FBTyxHQUFHLDhEQUFTO0FBQ25CO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNkNBQTZDLG9EQUFZLDJCQUEyQixvREFBWTtBQUNoRztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7O0FBRTNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixrREFBVSxnRUFBZ0U7QUFDbkcseUJBQXlCLGtEQUFVLGtFQUFrRTtBQUNyRztBQUNBLDBCQUEwQiwyREFBbUI7QUFDN0M7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTyxlQUFlLDJEQUFtQjtBQUN6QztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQyxDQUFDLDZDQUFTOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakIsV0FBVyxlQUFlO0FBQzFCO0FBQ0EsV0FBVyxlQUFlO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLHlEQUFjO0FBQ3pCLE9BQU8sNERBQW1CLEVBQUUsMkRBQWdCLEVBQUUsMkRBQWdCO0FBQzlELGtCQUFrQiw0REFBbUIsRUFBRSwyREFBZ0I7QUFDdkQsRUFBRSwyREFBZ0IsRUFBRSwyREFBZ0I7QUFDcEMsb0JBQW9CLHlEQUFjO0FBQ2xDLGVBQWUsMkRBQWdCO0FBQy9CLGlCQUFpQiwyREFBZ0I7QUFDakMsY0FBYywyREFBZ0I7QUFDOUIsb0JBQW9CLDJEQUFnQjtBQUNwQyxhQUFhLDJEQUFnQjtBQUM3QixpQkFBaUIseURBQWM7QUFDL0IsZ0JBQWdCLHlEQUFjO0FBQzlCLFVBQVUsNERBQW1CLEVBQUUsMkRBQWdCLEVBQUUsMkRBQWdCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL25vZGVfbW9kdWxlcy9yZWFjdC1zdGlja3lub2RlL2Rpc3QvZXMvU3RpY2t5LmpzPzBkMDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgWWFob28hIEluYy5cbiAqIENvcHlyaWdodHMgbGljZW5zZWQgdW5kZXIgdGhlIE5ldyBCU0QgTGljZW5zZS4gU2VlIHRoZSBhY2NvbXBhbnlpbmcgTElDRU5TRSBmaWxlIGZvciB0ZXJtcy5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgXCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnNldC1wcm90b3R5cGUtb2YuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZi5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LmNvbnN0cnVjdC5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanNcIjtcbmltcG9ydCBcImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qc1wiO1xuaW1wb3J0IFwiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanNcIjtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH0sIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgc3Vic2NyaWJlIH0gZnJvbSAnc3Vic2NyaWJlLXVpLWV2ZW50JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tICdzaGFsbG93ZXF1YWwnOyAvLyBjb25zdGFudHNcblxudmFyIFNUQVRVU19PUklHSU5BTCA9IDA7IC8vIFRoZSBkZWZhdWx0IHN0YXR1cywgbG9jYXRpbmcgYXQgdGhlIG9yaWdpbmFsIHBvc2l0aW9uLlxuXG52YXIgU1RBVFVTX1JFTEVBU0VEID0gMTsgLy8gVGhlIHJlbGVhc2VkIHN0YXR1cywgbG9jYXRpbmcgYXQgc29tZXdoZXJlIG9uIGRvY3VtZW50IGJ1dCBub3QgZGVmYXVsdCBvbmUuXG5cbnZhciBTVEFUVVNfRklYRUQgPSAyOyAvLyBUaGUgc3RpY2t5IHN0YXR1cywgbG9jYXRpbmcgZml4ZWQgdG8gdGhlIHRvcCBvciB0aGUgYm90dG9tIG9mIHNjcmVlbi5cblxudmFyIFRSQU5TRk9STV9QUk9QID0gJ3RyYW5zZm9ybSc7IC8vIGdsb2JhbCB2YXJpYWJsZSBmb3IgYWxsIGluc3RhbmNlc1xuXG52YXIgZG9jO1xudmFyIGRvY0JvZHk7XG52YXIgZG9jRWw7XG52YXIgY2FuRW5hYmxlVHJhbnNmb3JtcyA9IHRydWU7IC8vIFVzZSB0cmFuc2Zvcm0gYnkgZGVmYXVsdCwgc28gbm8gU3RpY2t5IG9uIGxvd2VyLWVuZCBicm93c2VyIHdoZW4gbm8gTW9kZXJuaXpyXG5cbnZhciBNO1xudmFyIHNjcm9sbERlbHRhID0gMDtcbnZhciB3aW47XG52YXIgd2luSGVpZ2h0ID0gLTE7XG5cbnZhciBTdGlja3kgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN0aWNreSwgX0NvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTdGlja3kpO1xuXG4gIGZ1bmN0aW9uIFN0aWNreShwcm9wcywgY29udGV4dCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGlja3kpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgX3RoaXMuaGFuZGxlUmVzaXplID0gX3RoaXMuaGFuZGxlUmVzaXplLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLmhhbmRsZVNjcm9sbCA9IF90aGlzLmhhbmRsZVNjcm9sbC5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICBfdGhpcy5oYW5kbGVTY3JvbGxTdGFydCA9IF90aGlzLmhhbmRsZVNjcm9sbFN0YXJ0LmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgIF90aGlzLmRlbHRhID0gMDtcbiAgICBfdGhpcy5zdGlja3lUb3AgPSAwO1xuICAgIF90aGlzLnN0aWNreUJvdHRvbSA9IDA7XG4gICAgX3RoaXMuZnJvemVuID0gZmFsc2U7XG4gICAgX3RoaXMuc2tpcE5leHRTY3JvbGxFdmVudCA9IGZhbHNlO1xuICAgIF90aGlzLnNjcm9sbFRvcCA9IC0xO1xuICAgIF90aGlzLmJvdHRvbUJvdW5kYXJ5VGFyZ2V0O1xuICAgIF90aGlzLnRvcFRhcmdldDtcbiAgICBfdGhpcy5zdWJzY3JpYmVycztcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHRvcDogMCxcbiAgICAgIC8vIEEgdG9wIG9mZnNldCBmcm9tIHZpZXdwb3J0IHRvcCB3aGVyZSBTdGlja3kgc3RpY2tzIHRvIHdoZW4gc2Nyb2xsaW5nIHVwXG4gICAgICBib3R0b206IDAsXG4gICAgICAvLyBBIGJvdHRvbSBvZmZzZXQgZnJvbSB2aWV3cG9ydCB0b3Agd2hlcmUgU3RpY2t5IHN0aWNrcyB0byB3aGVuIHNjcm9sbGluZyBkb3duXG4gICAgICB3aWR0aDogMCxcbiAgICAgIC8vIFN0aWNreSB3aWR0aFxuICAgICAgaGVpZ2h0OiAwLFxuICAgICAgLy8gU3RpY2t5IGhlaWdodFxuICAgICAgeDogMCxcbiAgICAgIC8vIFRoZSBvcmlnaW5hbCB4IG9mIFN0aWNreVxuICAgICAgeTogMCxcbiAgICAgIC8vIFRoZSBvcmlnaW5hbCB5IG9mIFN0aWNreVxuICAgICAgdG9wQm91bmRhcnk6IDAsXG4gICAgICAvLyBUaGUgdG9wIGJvdW5kYXJ5IG9uIGRvY3VtZW50XG4gICAgICBib3R0b21Cb3VuZGFyeTogSW5maW5pdHksXG4gICAgICAvLyBUaGUgYm90dG9tIGJvdW5kYXJ5IG9uIGRvY3VtZW50XG4gICAgICBzdGF0dXM6IFNUQVRVU19PUklHSU5BTCxcbiAgICAgIC8vIFRoZSBTdGlja3kgc3RhdHVzXG4gICAgICBwb3M6IDAsXG4gICAgICAvLyBSZWFsIHktYXhpcyBvZmZzZXQgZm9yIHJlbmRlcmluZyBwb3NpdGlvbi1maXhlZCBhbmQgcG9zaXRpb24tcmVsYXRpdmVcbiAgICAgIGFjdGl2YXRlZDogZmFsc2UgLy8gb25jZSBicm93c2VyIGluZm8gaXMgYXZhaWxhYmxlIGFmdGVyIG1vdW50ZWQsIGl0IGJlY29tZXMgdHJ1ZSB0byBhdm9pZCBjaGVja3N1bSBlcnJvclxuXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3RpY2t5LCBbe1xuICAgIGtleTogXCJnZXRUYXJnZXRIZWlnaHRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0SGVpZ2h0KHRhcmdldCkge1xuICAgICAgcmV0dXJuIHRhcmdldCAmJiB0YXJnZXQub2Zmc2V0SGVpZ2h0IHx8IDA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFRvcFBvc2l0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRvcFBvc2l0aW9uKHRvcCkge1xuICAgICAgLy8gYSB0b3AgYXJndW1lbnQgY2FuIGJlIHByb3ZpZGVkIHRvIG92ZXJyaWRlIHJlYWRpbmcgZnJvbSB0aGUgcHJvcHNcbiAgICAgIHRvcCA9IHRvcCB8fCB0aGlzLnByb3BzLnRvcCB8fCAwO1xuXG4gICAgICBpZiAodHlwZW9mIHRvcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRvcFRhcmdldCkge1xuICAgICAgICAgIHRoaXMudG9wVGFyZ2V0ID0gZG9jLnF1ZXJ5U2VsZWN0b3IodG9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvcCA9IHRoaXMuZ2V0VGFyZ2V0SGVpZ2h0KHRoaXMudG9wVGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRvcDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VGFyZ2V0Qm90dG9tXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldEJvdHRvbSh0YXJnZXQpIHtcbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICByZXR1cm4gdGhpcy5zY3JvbGxUb3AgKyByZWN0LmJvdHRvbTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Qm90dG9tQm91bmRhcnlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Qm90dG9tQm91bmRhcnkoYm90dG9tQm91bmRhcnkpIHtcbiAgICAgIC8vIGEgYm90dG9tQm91bmRhcnkgY2FuIGJlIHByb3ZpZGVkIHRvIGF2b2lkIHJlYWRpbmcgZnJvbSB0aGUgcHJvcHNcbiAgICAgIHZhciBib3VuZGFyeSA9IGJvdHRvbUJvdW5kYXJ5IHx8IHRoaXMucHJvcHMuYm90dG9tQm91bmRhcnk7IC8vIFRPRE8sIGJvdHRvbUJvdW5kYXJ5IHdhcyBhbiBvYmplY3QsIGRlcHJpY2F0ZSBpdCBsYXRlci5cblxuICAgICAgaWYgKF90eXBlb2YoYm91bmRhcnkpID09PSAnb2JqZWN0Jykge1xuICAgICAgICBib3VuZGFyeSA9IGJvdW5kYXJ5LnZhbHVlIHx8IGJvdW5kYXJ5LnRhcmdldCB8fCAwO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGJvdW5kYXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoIXRoaXMuYm90dG9tQm91bmRhcnlUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmJvdHRvbUJvdW5kYXJ5VGFyZ2V0ID0gZG9jLnF1ZXJ5U2VsZWN0b3IoYm91bmRhcnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgYm91bmRhcnkgPSB0aGlzLmdldFRhcmdldEJvdHRvbSh0aGlzLmJvdHRvbUJvdW5kYXJ5VGFyZ2V0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJvdW5kYXJ5ICYmIGJvdW5kYXJ5ID4gMCA/IGJvdW5kYXJ5IDogSW5maW5pdHk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogU1RBVFVTX09SSUdJTkFMLFxuICAgICAgICBwb3M6IDBcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZWxlYXNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbGVhc2UocG9zKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc3RhdHVzOiBTVEFUVVNfUkVMRUFTRUQsXG4gICAgICAgIHBvczogcG9zIC0gdGhpcy5zdGF0ZS55XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZml4XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZpeChwb3MpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdGF0dXM6IFNUQVRVU19GSVhFRCxcbiAgICAgICAgcG9zOiBwb3NcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluaXRpYWwgcG9zaXRpb24sIHdpZHRoLCBhbmQgaGVpZ2h0LiBJdCBzaG91bGQgdXBkYXRlIHdoZW5ldmVyIGNoaWxkcmVuIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBvcHRpb25hbCB0b3AgYW5kIGJvdHRvbUJvdW5kYXJ5IG5ldyB2YWx1ZXNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZUluaXRpYWxEaW1lbnNpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlSW5pdGlhbERpbWVuc2lvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgaWYgKCF0aGlzLm91dGVyRWxlbWVudCB8fCAhdGhpcy5pbm5lckVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3V0ZXJSZWN0ID0gdGhpcy5vdXRlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgaW5uZXJSZWN0ID0gdGhpcy5pbm5lckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgd2lkdGggPSBvdXRlclJlY3Qud2lkdGggfHwgb3V0ZXJSZWN0LnJpZ2h0IC0gb3V0ZXJSZWN0LmxlZnQ7XG4gICAgICB2YXIgaGVpZ2h0ID0gaW5uZXJSZWN0LmhlaWdodCB8fCBpbm5lclJlY3QuYm90dG9tIC0gaW5uZXJSZWN0LnRvcDtcbiAgICAgIHZhciBvdXRlclkgPSBvdXRlclJlY3QudG9wICsgdGhpcy5zY3JvbGxUb3A7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG9wOiB0aGlzLmdldFRvcFBvc2l0aW9uKG9wdGlvbnMudG9wKSxcbiAgICAgICAgYm90dG9tOiBNYXRoLm1pbih0aGlzLnN0YXRlLnRvcCArIGhlaWdodCwgd2luSGVpZ2h0KSxcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgeDogb3V0ZXJSZWN0LmxlZnQsXG4gICAgICAgIHk6IG91dGVyWSxcbiAgICAgICAgYm90dG9tQm91bmRhcnk6IHRoaXMuZ2V0Qm90dG9tQm91bmRhcnkob3B0aW9ucy5ib3R0b21Cb3VuZGFyeSksXG4gICAgICAgIHRvcEJvdW5kYXJ5OiBvdXRlcllcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVSZXNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlUmVzaXplKGUsIGFlKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5zaG91bGRGcmVlemUoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHdpbkhlaWdodCA9IGFlLnJlc2l6ZS5oZWlnaHQ7XG4gICAgICB0aGlzLnVwZGF0ZUluaXRpYWxEaW1lbnNpb24oKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZVNjcm9sbFN0YXJ0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFN0YXJ0KGUsIGFlKSB7XG4gICAgICB0aGlzLmZyb3plbiA9IHRoaXMucHJvcHMuc2hvdWxkRnJlZXplKCk7XG5cbiAgICAgIGlmICh0aGlzLmZyb3plbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNjcm9sbFRvcCA9PT0gYWUuc2Nyb2xsLnRvcCkge1xuICAgICAgICAvLyBTY3JvbGwgcG9zaXRpb24gaGFzbid0IGNoYW5nZWQsXG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgdGhpcy5za2lwTmV4dFNjcm9sbEV2ZW50ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gYWUuc2Nyb2xsLnRvcDtcbiAgICAgICAgdGhpcy51cGRhdGVJbml0aWFsRGltZW5zaW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZVNjcm9sbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGwoZSwgYWUpIHtcbiAgICAgIC8vIFNjcm9sbCBkb2Vzbid0IG5lZWQgdG8gYmUgaGFuZGxlZFxuICAgICAgaWYgKHRoaXMuc2tpcE5leHRTY3JvbGxFdmVudCkge1xuICAgICAgICB0aGlzLnNraXBOZXh0U2Nyb2xsRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzY3JvbGxEZWx0YSA9IGFlLnNjcm9sbC5kZWx0YTtcbiAgICAgIHRoaXMuc2Nyb2xsVG9wID0gYWUuc2Nyb2xsLnRvcDtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBTdGlja3kgcG9zaXRpb24uXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdmFyIGRpc2FibGVkID0gIXRoaXMucHJvcHMuZW5hYmxlZCB8fCB0aGlzLnN0YXRlLmJvdHRvbUJvdW5kYXJ5IC0gdGhpcy5zdGF0ZS50b3BCb3VuZGFyeSA8PSB0aGlzLnN0YXRlLmhlaWdodCB8fCB0aGlzLnN0YXRlLndpZHRoID09PSAwICYmIHRoaXMuc3RhdGUuaGVpZ2h0ID09PSAwO1xuXG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc3RhdHVzICE9PSBTVEFUVVNfT1JJR0lOQUwpIHtcbiAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkZWx0YSA9IHNjcm9sbERlbHRhOyAvLyBcInRvcFwiIGFuZCBcImJvdHRvbVwiIGFyZSB0aGUgcG9zaXRpb25zIHRoYXQgdGhpcy5zdGF0ZS50b3AgYW5kIHRoaXMuc3RhdGUuYm90dG9tIHByb2plY3RcbiAgICAgIC8vIG9uIGRvY3VtZW50IGZyb20gdmlld3BvcnQuXG5cbiAgICAgIHZhciB0b3AgPSB0aGlzLnNjcm9sbFRvcCArIHRoaXMuc3RhdGUudG9wO1xuICAgICAgdmFyIGJvdHRvbSA9IHRoaXMuc2Nyb2xsVG9wICsgdGhpcy5zdGF0ZS5ib3R0b207IC8vIFRoZXJlIGFyZSAyIHByaW5jaXBsZXMgdG8gbWFrZSBzdXJlIFN0aWNreSB3b24ndCBnZXQgd3Jvbmcgc28gbXVjaDpcbiAgICAgIC8vIDEuIFJlc2V0IFN0aWNreSB0byB0aGUgb3JpZ2luYWwgcG9zdGlvbiB3aGVuIFwidG9wXCIgPD0gdG9wQm91bmRhcnlcbiAgICAgIC8vIDIuIFJlbGVhc2UgU3RpY2t5IHRvIHRoZSBib3R0b20gYm91bmRhcnkgd2hlbiBcImJvdHRvbVwiID49IGJvdHRvbUJvdW5kYXJ5XG5cbiAgICAgIGlmICh0b3AgPD0gdGhpcy5zdGF0ZS50b3BCb3VuZGFyeSkge1xuICAgICAgICAvLyAjMVxuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICB9IGVsc2UgaWYgKGJvdHRvbSA+PSB0aGlzLnN0YXRlLmJvdHRvbUJvdW5kYXJ5KSB7XG4gICAgICAgIC8vICMyXG4gICAgICAgIHRoaXMuc3RpY2t5Qm90dG9tID0gdGhpcy5zdGF0ZS5ib3R0b21Cb3VuZGFyeTtcbiAgICAgICAgdGhpcy5zdGlja3lUb3AgPSB0aGlzLnN0aWNreUJvdHRvbSAtIHRoaXMuc3RhdGUuaGVpZ2h0O1xuICAgICAgICB0aGlzLnJlbGVhc2UodGhpcy5zdGlja3lUb3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaGVpZ2h0ID4gd2luSGVpZ2h0IC0gdGhpcy5zdGF0ZS50b3ApIHtcbiAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIFN0aWNreSBpcyBoaWdoZXIgdGhlbiB2aWV3cG9ydCBtaW51cyB0b3Agb2Zmc2V0XG4gICAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlLnN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSBTVEFUVVNfT1JJR0lOQUw6XG4gICAgICAgICAgICAgIHRoaXMucmVsZWFzZSh0aGlzLnN0YXRlLnkpO1xuICAgICAgICAgICAgICB0aGlzLnN0aWNreVRvcCA9IHRoaXMuc3RhdGUueTtcbiAgICAgICAgICAgICAgdGhpcy5zdGlja3lCb3R0b20gPSB0aGlzLnN0aWNreVRvcCArIHRoaXMuc3RhdGUuaGVpZ2h0O1xuICAgICAgICAgICAgLy8gQ29tbWVudHRpbmcgb3V0IFwiYnJlYWtcIiBpcyBvbiBwdXJwb3NlLCBiZWNhdXNlIHRoZXJlIGlzIGEgY2hhbmNlIHRvIHRyYW5zaXQgdG8gRklYRURcbiAgICAgICAgICAgIC8vIGZyb20gT1JJR0lOQUwgd2hlbiBjYWxsaW5nIHdpbmRvdy5zY3JvbGxUbygpLlxuICAgICAgICAgICAgLy8gYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgU1RBVFVTX1JFTEVBU0VEOlxuICAgICAgICAgICAgICAvLyBJZiBcInRvcFwiIGFuZCBcImJvdHRvbVwiIGFyZSBpbmJldHdlZW4gc3RpY2t5VG9wIGFuZCBzdGlja3lCb3R0b20sIHRoZW4gU3RpY2t5IGlzIGluXG4gICAgICAgICAgICAgIC8vIFJFTEVBU0Ugc3RhdHVzLiBPdGhlcndpc2UsIGl0IGNoYW5nZXMgdG8gRklYRUQgc3RhdHVzLCBhbmQgaXRzIGJvdHRvbSBzdGlja3MgdG9cbiAgICAgICAgICAgICAgLy8gdmlld3BvcnQgYm90dG9tIHdoZW4gc2Nyb2xsaW5nIGRvd24sIG9yIGl0cyB0b3Agc3RpY2tzIHRvIHZpZXdwb3J0IHRvcCB3aGVuIHNjcm9sbGluZyB1cC5cbiAgICAgICAgICAgICAgdGhpcy5zdGlja3lCb3R0b20gPSB0aGlzLnN0aWNreVRvcCArIHRoaXMuc3RhdGUuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgIGlmIChkZWx0YSA+IDAgJiYgYm90dG9tID4gdGhpcy5zdGlja3lCb3R0b20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpeCh0aGlzLnN0YXRlLmJvdHRvbSAtIHRoaXMuc3RhdGUuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZWx0YSA8IDAgJiYgdG9wIDwgdGhpcy5zdGlja3lUb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpeCh0aGlzLnN0YXRlLnRvcCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBTVEFUVVNfRklYRUQ6XG4gICAgICAgICAgICAgIHZhciB0b1JlbGVhc2UgPSB0cnVlO1xuICAgICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5zdGF0ZS5wb3M7XG4gICAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnN0YXRlLmhlaWdodDsgLy8gSW4gcmVndWxhciBjYXNlcywgd2hlbiBTdGlja3kgaXMgaW4gRklYRUQgc3RhdHVzLFxuICAgICAgICAgICAgICAvLyAxLiBpdCdzIHRvcCB3aWxsIHN0aWNrIHRvIHRoZSBzY3JlZW4gdG9wLFxuICAgICAgICAgICAgICAvLyAyLiBpdCdzIGJvdHRvbSB3aWxsIHN0aWNrIHRvIHRoZSBzY3JlZW4gYm90dG9tLFxuICAgICAgICAgICAgICAvLyAzLiBpZiBub3QgdGhlIGNhc2VzIGFib3ZlLCB0aGVuIGl0J3MgaGVpZ2h0IGdldHMgY2hhbmdlZFxuXG4gICAgICAgICAgICAgIGlmIChkZWx0YSA+IDAgJiYgcG9zID09PSB0aGlzLnN0YXRlLnRvcCkge1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgMSwgYW5kIHNjcm9sbGluZyBkb3duXG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lUb3AgPSB0b3AgLSBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0aWNreUJvdHRvbSA9IHRoaXMuc3RpY2t5VG9wICsgaGVpZ2h0O1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlbHRhIDwgMCAmJiBwb3MgPT09IHRoaXMuc3RhdGUuYm90dG9tIC0gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgLy8gY2FzZSAyLCBhbmQgc2Nyb2xsaW5nIHVwXG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lCb3R0b20gPSBib3R0b20gLSBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0aWNreVRvcCA9IHRoaXMuc3RpY2t5Qm90dG9tIC0gaGVpZ2h0O1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyAhPT0gdGhpcy5zdGF0ZS5ib3R0b20gLSBoZWlnaHQgJiYgcG9zICE9PSB0aGlzLnN0YXRlLnRvcCkge1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgM1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FzZSBvbmx5IGhhcHBlbnMgd2hlbiBTdGlja3kncyBib3R0b20gc3RpY2tzIHRvIHRoZSBzY3JlZW4gYm90dG9tIGFuZFxuICAgICAgICAgICAgICAgIC8vIGl0cyBoZWlnaHQgZ2V0cyBjaGFuZ2VkLiBTdGlja3kgc2hvdWxkIGJlIGluIFJFTEVBU0Ugc3RhdHVzIGFuZCB1cGRhdGUgaXRzXG4gICAgICAgICAgICAgICAgLy8gc3RpY2t5IGJvdHRvbSBieSBjYWxjdWxhdGluZyBob3cgbXVjaCBoZWlnaHQgaXQgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB2YXIgZGVsdGFIZWlnaHQgPSBwb3MgKyBoZWlnaHQgLSB0aGlzLnN0YXRlLmJvdHRvbTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0aWNreUJvdHRvbSA9IGJvdHRvbSAtIGRlbHRhICsgZGVsdGFIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGlja3lUb3AgPSB0aGlzLnN0aWNreUJvdHRvbSAtIGhlaWdodDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b1JlbGVhc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0b1JlbGVhc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2UodGhpcy5zdGlja3lUb3ApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgU3RpY2t5IGlzIHNob3J0ZXIgdGhlbiB2aWV3cG9ydCBtaW51cyB0b3Agb2Zmc2V0XG4gICAgICAgICAgLy8gYW5kIHdpbGwgYWx3YXlzIGZpeCB0byB0aGUgdG9wIG9mZnNldCBvZiB2aWV3cG9ydFxuICAgICAgICAgIHRoaXMuZml4KHRoaXMuc3RhdGUudG9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRlbHRhID0gZGVsdGE7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAocHJldlN0YXRlLnN0YXR1cyAhPT0gdGhpcy5zdGF0ZS5zdGF0dXMgJiYgdGhpcy5wcm9wcy5vblN0YXRlQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TdGF0ZUNoYW5nZSh7XG4gICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXRlLnN0YXR1c1xuICAgICAgICB9KTtcbiAgICAgIH0gLy8gY2hlY2sgaWYgd2UgYXJlIHVwLXRvLWRhdGUsIGlzIHRyaWdnZXJlZCBpbiBjYXNlIG9mIHNjcm9sbCByZXN0b3JhdGlvblxuXG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLnRvcCAhPT0gcHJldlN0YXRlLnRvcCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUluaXRpYWxEaW1lbnNpb24oKTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFyZVByb3BzQ2hhbmdlZCA9ICFzaGFsbG93RXF1YWwodGhpcy5wcm9wcywgcHJldlByb3BzKTtcblxuICAgICAgaWYgKGFyZVByb3BzQ2hhbmdlZCkge1xuICAgICAgICAvLyBpZiB0aGUgcHJvcHMgZm9yIGVuYWJsaW5nIGFyZSB0b2dnbGVkLCB0aGVuIHRyaWdnZXIgdGhlIHVwZGF0ZSBvciByZXNldCBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgcHJvcHNcbiAgICAgICAgaWYgKHByZXZQcm9wcy5lbmFibGVkICE9PSB0aGlzLnByb3BzLmVuYWJsZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5lbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgYWN0aXZhdGVkOiB0cnVlXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzMi51cGRhdGVJbml0aWFsRGltZW5zaW9uKCk7XG5cbiAgICAgICAgICAgICAgX3RoaXMyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBhY3RpdmF0ZWQ6IGZhbHNlXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzMi5yZXNldCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIGlmIHRoZSB0b3Agb3IgYm90dG9tQm91bmRhcnkgcHJvcHMgd2VyZSBjaGFuZ2VkLCB0aGVuIHRyaWdnZXIgdGhlIHVwZGF0ZVxuICAgICAgICBlbHNlIGlmIChwcmV2UHJvcHMudG9wICE9PSB0aGlzLnByb3BzLnRvcCB8fCBwcmV2UHJvcHMuYm90dG9tQm91bmRhcnkgIT09IHRoaXMucHJvcHMuYm90dG9tQm91bmRhcnkpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUluaXRpYWxEaW1lbnNpb24oKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdmFyIHN1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVycyB8fCBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IHN1YnNjcmliZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnNbaV0udW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAvLyBPbmx5IGluaXRpYWxpemUgdGhlIGdsb2JhbHMgaWYgdGhpcyBpcyB0aGUgZmlyc3RcbiAgICAgIC8vIHRpbWUgdGhpcyBjb21wb25lbnQgdHlwZSBoYXMgYmVlbiBtb3VudGVkXG4gICAgICBpZiAoIXdpbikge1xuICAgICAgICB3aW4gPSB3aW5kb3c7XG4gICAgICAgIGRvYyA9IGRvY3VtZW50O1xuICAgICAgICBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIGRvY0JvZHkgPSBkb2MuYm9keTtcbiAgICAgICAgd2luSGVpZ2h0ID0gd2luLmlubmVySGVpZ2h0IHx8IGRvY0VsLmNsaWVudEhlaWdodDtcbiAgICAgICAgTSA9IHdpbmRvdy5Nb2Rlcm5penI7IC8vIE5vIFN0aWNreSBvbiBsb3dlci1lbmQgYnJvd3NlciB3aGVuIG5vIE1vZGVybml6clxuXG4gICAgICAgIGlmIChNICYmIE0ucHJlZml4ZWQpIHtcbiAgICAgICAgICBjYW5FbmFibGVUcmFuc2Zvcm1zID0gTS5jc3N0cmFuc2Zvcm1zM2Q7XG4gICAgICAgICAgVFJBTlNGT1JNX1BST1AgPSBNLnByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyB3aGVuIG1vdW50LCB0aGUgc2Nyb2xsVG9wIGlzIG5vdCBuZWNlc3Nhcnkgb24gdGhlIHRvcFxuXG5cbiAgICAgIHRoaXMuc2Nyb2xsVG9wID0gZG9jQm9keS5zY3JvbGxUb3AgKyBkb2NFbC5zY3JvbGxUb3A7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYWN0aXZhdGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUluaXRpYWxEaW1lbnNpb24oKTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH0gLy8gYmluZCB0aGUgbGlzdGVuZXJzIHJlZ2FyZGxlc3MgaWYgaW5pdGlhbGx5IGVuYWJsZWQgLSBhbGxvd3MgdGhlIGNvbXBvbmVudCB0byB0b2dnbGUgc3RpY2t5IGZ1bmN0aW9uYWxpdHlcblxuXG4gICAgICB0aGlzLnN1YnNjcmliZXJzID0gW3N1YnNjcmliZSgnc2Nyb2xsU3RhcnQnLCB0aGlzLmhhbmRsZVNjcm9sbFN0YXJ0LmJpbmQodGhpcyksIHtcbiAgICAgICAgdXNlUkFGOiB0cnVlXG4gICAgICB9KSwgc3Vic2NyaWJlKCdzY3JvbGwnLCB0aGlzLmhhbmRsZVNjcm9sbC5iaW5kKHRoaXMpLCB7XG4gICAgICAgIHVzZVJBRjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlU2Nyb2xsSW5mbzogdHJ1ZVxuICAgICAgfSksIHN1YnNjcmliZSgncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUuYmluZCh0aGlzKSwge1xuICAgICAgICBlbmFibGVSZXNpemVJbmZvOiB0cnVlXG4gICAgICB9KV07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRyYW5zbGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGUoc3R5bGUsIHBvcykge1xuICAgICAgdmFyIGVuYWJsZVRyYW5zZm9ybXMgPSBjYW5FbmFibGVUcmFuc2Zvcm1zICYmIHRoaXMucHJvcHMuZW5hYmxlVHJhbnNmb3JtcztcblxuICAgICAgaWYgKGVuYWJsZVRyYW5zZm9ybXMgJiYgdGhpcy5zdGF0ZS5hY3RpdmF0ZWQpIHtcbiAgICAgICAgc3R5bGVbVFJBTlNGT1JNX1BST1BdID0gJ3RyYW5zbGF0ZTNkKDAsJyArIE1hdGgucm91bmQocG9zKSArICdweCwwKSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZS50b3AgPSBwb3MgKyAncHgnO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzaG91bGRDb21wb25lbnRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICByZXR1cm4gIXRoaXMucHJvcHMuc2hvdWxkRnJlZXplKCkgJiYgIShzaGFsbG93RXF1YWwodGhpcy5wcm9wcywgbmV4dFByb3BzKSAmJiBzaGFsbG93RXF1YWwodGhpcy5zdGF0ZSwgbmV4dFN0YXRlKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX2NsYXNzTmFtZXMsXG4gICAgICAgICAgX3RoaXMzID0gdGhpcztcblxuICAgICAgLy8gVE9ETywgXCJvdmVyZmxvdzogYXV0b1wiIHByZXZlbnRzIGNvbGxhcHNlLCBuZWVkIGEgZ29vZCB3YXkgdG8gZ2V0IGNoaWxkcmVuIGhlaWdodFxuICAgICAgdmFyIGlubmVyU3R5bGUgPSB7XG4gICAgICAgIHBvc2l0aW9uOiB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gU1RBVFVTX0ZJWEVEID8gJ2ZpeGVkJyA6ICdyZWxhdGl2ZScsXG4gICAgICAgIHRvcDogdGhpcy5zdGF0ZS5zdGF0dXMgPT09IFNUQVRVU19GSVhFRCA/ICcwcHgnIDogJycsXG4gICAgICAgIHpJbmRleDogdGhpcy5wcm9wcy5pbm5lclpcbiAgICAgIH07XG4gICAgICB2YXIgb3V0ZXJTdHlsZSA9IHt9OyAvLyBhbHdheXMgdXNlIHRyYW5zbGF0ZTNkIHRvIGVuaGFuY2UgdGhlIHBlcmZvcm1hbmNlXG5cbiAgICAgIHRoaXMudHJhbnNsYXRlKGlubmVyU3R5bGUsIHRoaXMuc3RhdGUucG9zKTtcblxuICAgICAgaWYgKHRoaXMuc3RhdGUuc3RhdHVzICE9PSBTVEFUVVNfT1JJR0lOQUwpIHtcbiAgICAgICAgaW5uZXJTdHlsZS53aWR0aCA9IHRoaXMuc3RhdGUud2lkdGggKyAncHgnO1xuICAgICAgICBvdXRlclN0eWxlLmhlaWdodCA9IHRoaXMuc3RhdGUuaGVpZ2h0ICsgJ3B4JztcbiAgICAgIH1cblxuICAgICAgdmFyIG91dGVyQ2xhc3NlcyA9IGNsYXNzTmFtZXMoJ3N0aWNreS1vdXRlci13cmFwcGVyJywgdGhpcy5wcm9wcy5jbGFzc05hbWUsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHRoaXMucHJvcHMuYWN0aXZlQ2xhc3MsIHRoaXMuc3RhdGUuc3RhdHVzID09PSBTVEFUVVNfRklYRUQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHRoaXMucHJvcHMucmVsZWFzZWRDbGFzcywgdGhpcy5zdGF0ZS5zdGF0dXMgPT09IFNUQVRVU19SRUxFQVNFRCksIF9jbGFzc05hbWVzKSk7XG4gICAgICB2YXIgaW5uZXJDbGFzc2VzID0gY2xhc3NOYW1lcygnc3RpY2t5LWlubmVyLXdyYXBwZXInLCB0aGlzLnByb3BzLmlubmVyQ2xhc3MsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgdGhpcy5wcm9wcy5pbm5lckFjdGl2ZUNsYXNzLCB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gU1RBVFVTX0ZJWEVEKSk7XG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYob3V0ZXIpIHtcbiAgICAgICAgICBfdGhpczMub3V0ZXJFbGVtZW50ID0gb3V0ZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzTmFtZTogb3V0ZXJDbGFzc2VzLFxuICAgICAgICBzdHlsZTogb3V0ZXJTdHlsZVxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbm5lcikge1xuICAgICAgICAgIF90aGlzMy5pbm5lckVsZW1lbnQgPSBpbm5lcjtcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NOYW1lOiBpbm5lckNsYXNzZXMsXG4gICAgICAgIHN0eWxlOiBpbm5lclN0eWxlXG4gICAgICB9LCB0eXBlb2YgY2hpbGRyZW4gPT09ICdmdW5jdGlvbicgPyBjaGlsZHJlbih7XG4gICAgICAgIHN0YXR1czogdGhpcy5zdGF0ZS5zdGF0dXNcbiAgICAgIH0pIDogY2hpbGRyZW4pKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3RpY2t5O1xufShDb21wb25lbnQpO1xuXG5TdGlja3kuZGlzcGxheU5hbWUgPSAnU3RpY2t5JztcblN0aWNreS5kZWZhdWx0UHJvcHMgPSB7XG4gIHNob3VsZEZyZWV6ZTogZnVuY3Rpb24gc2hvdWxkRnJlZXplKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgdG9wOiAwLFxuICBib3R0b21Cb3VuZGFyeTogMCxcbiAgZW5hYmxlVHJhbnNmb3JtczogdHJ1ZSxcbiAgYWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuICByZWxlYXNlZENsYXNzOiAncmVsZWFzZWQnLFxuICBvblN0YXRlQ2hhbmdlOiBudWxsLFxuICBpbm5lckNsYXNzOiAnJyxcbiAgaW5uZXJBY3RpdmVDbGFzczogJydcbn07XG4vKipcbiAqIEBwYXJhbSB7Qm9vbH0gZW5hYmxlZCBBIHN3aXRjaCB0byBlbmFibGUgb3IgZGlzYWJsZSBTdGlja3kuXG4gKiBAcGFyYW0ge1N0cmluZy9OdW1iZXJ9IHRvcCBBIHRvcCBvZmZzZXQgcHggZm9yIFN0aWNreS4gQ291bGQgYmUgYSBzZWxlY3RvciByZXByZXNlbnRpbmcgYSBub2RlXG4gKiAgICAgICAgd2hvc2UgaGVpZ2h0IHNob3VsZCBzZXJ2ZSBhcyB0aGUgdG9wIG9mZnNldC5cbiAqIEBwYXJhbSB7U3RyaW5nL051bWJlcn0gYm90dG9tQm91bmRhcnkgQSBib3R0b20gYm91bmRhcnkgcHggb24gZG9jdW1lbnQgd2hlcmUgU3RpY2t5IHdpbGwgc3RvcC5cbiAqICAgICAgICBDb3VsZCBiZSBhIHNlbGVjdG9yIHJlcHJlc2VudGluZyBhIG5vZGUgd2hvc2UgYm90dG9tIHNob3VsZCBzZXJ2ZSBhcyB0aGUgYm90dG9tIGJvdWRhcnkuXG4gKi9cblxuU3RpY2t5LnByb3BUeXBlcyA9IHtcbiAgZW5hYmxlZDogUHJvcFR5cGVzLmJvb2wsXG4gIHRvcDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm51bWJlcl0pLFxuICBib3R0b21Cb3VuZGFyeTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm9iamVjdCwgLy8gVE9ETywgbWF5IHJlbW92ZVxuICBQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG4gIGVuYWJsZVRyYW5zZm9ybXM6IFByb3BUeXBlcy5ib29sLFxuICBhY3RpdmVDbGFzczogUHJvcFR5cGVzLnN0cmluZyxcbiAgcmVsZWFzZWRDbGFzczogUHJvcFR5cGVzLnN0cmluZyxcbiAgaW5uZXJDbGFzczogUHJvcFR5cGVzLnN0cmluZyxcbiAgaW5uZXJBY3RpdmVDbGFzczogUHJvcFR5cGVzLnN0cmluZyxcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBvblN0YXRlQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgc2hvdWxkRnJlZXplOiBQcm9wVHlwZXMuZnVuYyxcbiAgaW5uZXJaOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSlcbn07XG5TdGlja3kuU1RBVFVTX09SSUdJTkFMID0gU1RBVFVTX09SSUdJTkFMO1xuU3RpY2t5LlNUQVRVU19SRUxFQVNFRCA9IFNUQVRVU19SRUxFQVNFRDtcblN0aWNreS5TVEFUVVNfRklYRUQgPSBTVEFUVVNfRklYRUQ7XG5leHBvcnQgZGVmYXVsdCBTdGlja3k7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-stickynode/dist/es/Sticky.js\n");

/***/ })

};
;